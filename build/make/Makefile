PACKAGE = shish
VERSION = 0.8

TOP_SRCDIR = ../..
LIB_SRCDIR = $(TOP_SRCDIR)/lib
SRCDIR = $(TOP_SRCDIR)/src

CC = i686-pc-cygwin-gcc   
CFLAGS = -g -O2 -Wall
DEFS = -DPACKAGE_NAME=\"$(PACKAGE)\" -DPACKAGE_VERSION=\"$(VERSION)\"
CPPFLAGS = -I$(TOP_SRCDIR) -I$(LIB_SRCDIR) -I$(TOP_SRCDIR)/src

EXEEXT = .exe
SOURCES = $(LIB_SRCDIR)/buffer/buffer_close.c $(LIB_SRCDIR)/buffer/buffer_default.c $(LIB_SRCDIR)/buffer/buffer_dump.c $(LIB_SRCDIR)/buffer/buffer_feed.c $(LIB_SRCDIR)/buffer/buffer_flush.c $(LIB_SRCDIR)/buffer/buffer_free.c $(LIB_SRCDIR)/buffer/buffer_fromsa.c $(LIB_SRCDIR)/buffer/buffer_fromstr.c $(LIB_SRCDIR)/buffer/buffer_get.c $(LIB_SRCDIR)/buffer/buffer_get_until.c $(LIB_SRCDIR)/buffer/buffer_getc.c $(LIB_SRCDIR)/buffer/buffer_init.c $(LIB_SRCDIR)/buffer/buffer_mmapprivate.c $(LIB_SRCDIR)/buffer/buffer_mmapread.c $(LIB_SRCDIR)/buffer/buffer_mmapread_fd.c $(LIB_SRCDIR)/buffer/buffer_prefetch.c $(LIB_SRCDIR)/buffer/buffer_put.c $(LIB_SRCDIR)/buffer/buffer_putc.c $(LIB_SRCDIR)/buffer/buffer_putflush.c $(LIB_SRCDIR)/buffer/buffer_putm_internal.c $(LIB_SRCDIR)/buffer/buffer_putnlflush.c $(LIB_SRCDIR)/buffer/buffer_putnspace.c $(LIB_SRCDIR)/buffer/buffer_puts.c $(LIB_SRCDIR)/buffer/buffer_putsa.c $(LIB_SRCDIR)/buffer/buffer_putsflush.c $(LIB_SRCDIR)/buffer/buffer_putspace.c $(LIB_SRCDIR)/buffer/buffer_putulong.c $(LIB_SRCDIR)/buffer/buffer_skip_until.c $(LIB_SRCDIR)/buffer/buffer_stubborn.c $(LIB_SRCDIR)/buffer/buffer_stubborn2.c $(LIB_SRCDIR)/buffer/buffer_tosa.c $(LIB_SRCDIR)/buffer/buffer_truncfile.c $(LIB_SRCDIR)/byte/byte_chr.c $(LIB_SRCDIR)/byte/byte_copy.c $(LIB_SRCDIR)/byte/byte_copyr.c $(LIB_SRCDIR)/byte/byte_diff.c $(LIB_SRCDIR)/byte/byte_fill.c $(LIB_SRCDIR)/byte/byte_rchr.c $(LIB_SRCDIR)/byte/byte_zero.c $(LIB_SRCDIR)/fmt/fmt_long.c $(LIB_SRCDIR)/fmt/fmt_minus.c $(LIB_SRCDIR)/fmt/fmt_ulong.c $(LIB_SRCDIR)/fmt/fmt_ulong0.c $(LIB_SRCDIR)/fmt/fmt_xlong.c $(LIB_SRCDIR)/fmt/fmt_xlonglong.c $(LIB_SRCDIR)/mmap/mmap_private.c $(LIB_SRCDIR)/mmap/mmap_read.c $(LIB_SRCDIR)/mmap/mmap_read_fd.c $(LIB_SRCDIR)/open/open_read.c $(LIB_SRCDIR)/open/open_temp.c $(LIB_SRCDIR)/open/open_trunc.c $(LIB_SRCDIR)/scan/scan_8long.c $(LIB_SRCDIR)/scan/scan_int.c $(LIB_SRCDIR)/scan/scan_long.c $(LIB_SRCDIR)/scan/scan_uint.c $(LIB_SRCDIR)/scan/scan_ulong.c $(LIB_SRCDIR)/shell/shell_alloc.c $(LIB_SRCDIR)/shell/shell_basename.c $(LIB_SRCDIR)/shell/shell_canonicalize.c $(LIB_SRCDIR)/shell/shell_dirname.c $(LIB_SRCDIR)/shell/shell_error.c $(LIB_SRCDIR)/shell/shell_errorn.c $(LIB_SRCDIR)/shell/shell_fnmatch.c $(LIB_SRCDIR)/shell/shell_getcwd.c $(LIB_SRCDIR)/shell/shell_gethome.c $(LIB_SRCDIR)/shell/shell_gethostname.c $(LIB_SRCDIR)/shell/shell_getopt.c $(LIB_SRCDIR)/shell/shell_init.c $(LIB_SRCDIR)/shell/shell_readlink.c $(LIB_SRCDIR)/shell/shell_realloc.c $(LIB_SRCDIR)/shell/shell_realpath.c $(LIB_SRCDIR)/shell/shell_strdup.c $(LIB_SRCDIR)/str/str_chr.c $(LIB_SRCDIR)/str/str_copy.c $(LIB_SRCDIR)/str/str_copyn.c $(LIB_SRCDIR)/str/str_diff.c $(LIB_SRCDIR)/str/str_len.c $(LIB_SRCDIR)/str/str_rchr.c $(LIB_SRCDIR)/stralloc/stralloc_cat.c $(LIB_SRCDIR)/stralloc/stralloc_catb.c $(LIB_SRCDIR)/stralloc/stralloc_catc.c $(LIB_SRCDIR)/stralloc/stralloc_catlong0.c $(LIB_SRCDIR)/stralloc/stralloc_cats.c $(LIB_SRCDIR)/stralloc/stralloc_catulong0.c $(LIB_SRCDIR)/stralloc/stralloc_copy.c $(LIB_SRCDIR)/stralloc/stralloc_copyb.c $(LIB_SRCDIR)/stralloc/stralloc_copys.c $(LIB_SRCDIR)/stralloc/stralloc_diffs.c $(LIB_SRCDIR)/stralloc/stralloc_free.c $(LIB_SRCDIR)/stralloc/stralloc_init.c $(LIB_SRCDIR)/stralloc/stralloc_insertb.c $(LIB_SRCDIR)/stralloc/stralloc_move.c $(LIB_SRCDIR)/stralloc/stralloc_nul.c $(LIB_SRCDIR)/stralloc/stralloc_ready.c $(LIB_SRCDIR)/stralloc/stralloc_readyplus.c $(LIB_SRCDIR)/stralloc/stralloc_remove.c $(LIB_SRCDIR)/stralloc/stralloc_trunc.c $(LIB_SRCDIR)/stralloc/stralloc_write.c $(LIB_SRCDIR)/stralloc/stralloc_zero.c $(LIB_SRCDIR)/uint32/uint32_prng.c $(LIB_SRCDIR)/uint32/uint32_random.c $(LIB_SRCDIR)/uint32/uint32_seed.c $(SRCDIR)/builtin/builtin_basename.c $(SRCDIR)/builtin/builtin_break.c $(SRCDIR)/builtin/builtin_cd.c $(SRCDIR)/builtin/builtin_dirname.c $(SRCDIR)/builtin/builtin_dump.c $(SRCDIR)/builtin/builtin_echo.c $(SRCDIR)/builtin/builtin_error.c $(SRCDIR)/builtin/builtin_eval.c $(SRCDIR)/builtin/builtin_exec.c $(SRCDIR)/builtin/builtin_exit.c $(SRCDIR)/builtin/builtin_export.c $(SRCDIR)/builtin/builtin_false.c $(SRCDIR)/builtin/builtin_fdtable.c $(SRCDIR)/builtin/builtin_hash.c $(SRCDIR)/builtin/builtin_history.c $(SRCDIR)/builtin/builtin_hostname.c $(SRCDIR)/builtin/builtin_pwd.c $(SRCDIR)/builtin/builtin_search.c $(SRCDIR)/builtin/builtin_set.c $(SRCDIR)/builtin/builtin_shift.c $(SRCDIR)/builtin/builtin_source.c $(SRCDIR)/builtin/builtin_table.c $(SRCDIR)/builtin/builtin_test.c $(SRCDIR)/builtin/builtin_true.c $(SRCDIR)/builtin/builtin_unset.c $(SRCDIR)/debug/debug_alloc.c $(SRCDIR)/debug/debug_begin.c $(SRCDIR)/debug/debug_char.c $(SRCDIR)/debug/debug_end.c $(SRCDIR)/debug/debug_error.c $(SRCDIR)/debug/debug_free.c $(SRCDIR)/debug/debug_list.c $(SRCDIR)/debug/debug_memory.c $(SRCDIR)/debug/debug_node.c $(SRCDIR)/debug/debug_ptr.c $(SRCDIR)/debug/debug_realloc.c $(SRCDIR)/debug/debug_redir.c $(SRCDIR)/debug/debug_space.c $(SRCDIR)/debug/debug_str.c $(SRCDIR)/debug/debug_stralloc.c $(SRCDIR)/debug/debug_sublist.c $(SRCDIR)/debug/debug_subnode.c $(SRCDIR)/debug/debug_subst.c $(SRCDIR)/debug/debug_ulong.c $(SRCDIR)/debug/debug_unquoted.c $(SRCDIR)/eval/eval_and_or.c $(SRCDIR)/eval/eval_case.c $(SRCDIR)/eval/eval_cmdlist.c $(SRCDIR)/eval/eval_command.c $(SRCDIR)/eval/eval_for.c $(SRCDIR)/eval/eval_if.c $(SRCDIR)/eval/eval_jump.c $(SRCDIR)/eval/eval_loop.c $(SRCDIR)/eval/eval_pipeline.c $(SRCDIR)/eval/eval_pop.c $(SRCDIR)/eval/eval_push.c $(SRCDIR)/eval/eval_simple_command.c $(SRCDIR)/eval/eval_subshell.c $(SRCDIR)/eval/eval_tree.c $(SRCDIR)/exec/exec_check.c $(SRCDIR)/exec/exec_command.c $(SRCDIR)/exec/exec_create.c $(SRCDIR)/exec/exec_error.c $(SRCDIR)/exec/exec_hash.c $(SRCDIR)/exec/exec_path.c $(SRCDIR)/exec/exec_program.c $(SRCDIR)/exec/exec_search.c $(SRCDIR)/expand/expand_arg.c $(SRCDIR)/expand/expand_args.c $(SRCDIR)/expand/expand_argv.c $(SRCDIR)/expand/expand_arith.c $(SRCDIR)/expand/expand_cat.c $(SRCDIR)/expand/expand_catsa.c $(SRCDIR)/expand/expand_command.c $(SRCDIR)/expand/expand_copysa.c $(SRCDIR)/expand/expand_escape.c $(SRCDIR)/expand/expand_glob.c $(SRCDIR)/expand/expand_param.c $(SRCDIR)/expand/expand_unescape.c $(SRCDIR)/expand/expand_vars.c $(SRCDIR)/fd/fd_allocbuf.c $(SRCDIR)/fd/fd_close.c $(SRCDIR)/fd/fd_dump.c $(SRCDIR)/fd/fd_dumplist.c $(SRCDIR)/fd/fd_dup.c $(SRCDIR)/fd/fd_error.c $(SRCDIR)/fd/fd_exec.c $(SRCDIR)/fd/fd_free.c $(SRCDIR)/fd/fd_getname.c $(SRCDIR)/fd/fd_here.c $(SRCDIR)/fd/fd_init.c $(SRCDIR)/fd/fd_list.c $(SRCDIR)/fd/fd_mmap.c $(SRCDIR)/fd/fd_needbuf.c $(SRCDIR)/fd/fd_new.c $(SRCDIR)/fd/fd_null.c $(SRCDIR)/fd/fd_open.c $(SRCDIR)/fd/fd_pipe.c $(SRCDIR)/fd/fd_pop.c $(SRCDIR)/fd/fd_print.c $(SRCDIR)/fd/fd_push.c $(SRCDIR)/fd/fd_reinit.c $(SRCDIR)/fd/fd_setbuf.c $(SRCDIR)/fd/fd_setfd.c $(SRCDIR)/fd/fd_stat.c $(SRCDIR)/fd/fd_string.c $(SRCDIR)/fd/fd_subst.c $(SRCDIR)/fd/fd_tempfile.c $(SRCDIR)/fdstack/fdstack_data.c $(SRCDIR)/fdstack/fdstack_dump.c $(SRCDIR)/fdstack/fdstack_flatten.c $(SRCDIR)/fdstack/fdstack_fork.c $(SRCDIR)/fdstack/fdstack_link.c $(SRCDIR)/fdstack/fdstack_npipes.c $(SRCDIR)/fdstack/fdstack_pipe.c $(SRCDIR)/fdstack/fdstack_pop.c $(SRCDIR)/fdstack/fdstack_push.c $(SRCDIR)/fdstack/fdstack_root.c $(SRCDIR)/fdstack/fdstack_search.c $(SRCDIR)/fdstack/fdstack_unlink.c $(SRCDIR)/fdstack/fdstack_unref.c $(SRCDIR)/fdstack/fdstack_update.c $(SRCDIR)/fdtable/fdtable_check.c $(SRCDIR)/fdtable/fdtable_close.c $(SRCDIR)/fdtable/fdtable_dump.c $(SRCDIR)/fdtable/fdtable_dup.c $(SRCDIR)/fdtable/fdtable_exec.c $(SRCDIR)/fdtable/fdtable_gap.c $(SRCDIR)/fdtable/fdtable_here.c $(SRCDIR)/fdtable/fdtable_lazy.c $(SRCDIR)/fdtable/fdtable_link.c $(SRCDIR)/fdtable/fdtable_newfd.c $(SRCDIR)/fdtable/fdtable_open.c $(SRCDIR)/fdtable/fdtable_resolve.c $(SRCDIR)/fdtable/fdtable_table.c $(SRCDIR)/fdtable/fdtable_track.c $(SRCDIR)/fdtable/fdtable_unexpected.c $(SRCDIR)/fdtable/fdtable_unlink.c $(SRCDIR)/fdtable/fdtable_up.c $(SRCDIR)/fdtable/fdtable_wish.c $(SRCDIR)/history/history_advance.c $(SRCDIR)/history/history_clear.c $(SRCDIR)/history/history_cmdlen.c $(SRCDIR)/history/history_free.c $(SRCDIR)/history/history_load.c $(SRCDIR)/history/history_next.c $(SRCDIR)/history/history_prev.c $(SRCDIR)/history/history_print.c $(SRCDIR)/history/history_resize.c $(SRCDIR)/history/history_save.c $(SRCDIR)/history/history_set.c $(SRCDIR)/job/job_fork.c $(SRCDIR)/job/job_init.c $(SRCDIR)/job/job_new.c $(SRCDIR)/job/job_status.c $(SRCDIR)/job/job_wait.c $(SRCDIR)/parse/parse_and_or.c $(SRCDIR)/parse/parse_arith.c $(SRCDIR)/parse/parse_bquoted.c $(SRCDIR)/parse/parse_case.c $(SRCDIR)/parse/parse_chartable.c $(SRCDIR)/parse/parse_command.c $(SRCDIR)/parse/parse_compound_list.c $(SRCDIR)/parse/parse_dquoted.c $(SRCDIR)/parse/parse_error.c $(SRCDIR)/parse/parse_expect.c $(SRCDIR)/parse/parse_for.c $(SRCDIR)/parse/parse_function.c $(SRCDIR)/parse/parse_getarg.c $(SRCDIR)/parse/parse_gettok.c $(SRCDIR)/parse/parse_grouping.c $(SRCDIR)/parse/parse_here.c $(SRCDIR)/parse/parse_if.c $(SRCDIR)/parse/parse_init.c $(SRCDIR)/parse/parse_keyword.c $(SRCDIR)/parse/parse_list.c $(SRCDIR)/parse/parse_loop.c $(SRCDIR)/parse/parse_newnode.c $(SRCDIR)/parse/parse_param.c $(SRCDIR)/parse/parse_pipeline.c $(SRCDIR)/parse/parse_simple_command.c $(SRCDIR)/parse/parse_simpletok.c $(SRCDIR)/parse/parse_skipspace.c $(SRCDIR)/parse/parse_squoted.c $(SRCDIR)/parse/parse_string.c $(SRCDIR)/parse/parse_subst.c $(SRCDIR)/parse/parse_tokens.c $(SRCDIR)/parse/parse_tokname.c $(SRCDIR)/parse/parse_unquoted.c $(SRCDIR)/parse/parse_validname.c $(SRCDIR)/parse/parse_word.c $(SRCDIR)/prompt/prompt_escape.c $(SRCDIR)/prompt/prompt_expand.c $(SRCDIR)/prompt/prompt_parse.c $(SRCDIR)/prompt/prompt_show.c $(SRCDIR)/redir/redir_addhere.c $(SRCDIR)/redir/redir_dup.c $(SRCDIR)/redir/redir_eval.c $(SRCDIR)/redir/redir_here.c $(SRCDIR)/redir/redir_open.c $(SRCDIR)/redir/redir_parse.c $(SRCDIR)/redir/redir_source.c $(SRCDIR)/sh/sh_error.c $(SRCDIR)/sh/sh_errorn.c $(SRCDIR)/sh/sh_exit.c $(SRCDIR)/sh/sh_forked.c $(SRCDIR)/sh/sh_getcwd.c $(SRCDIR)/sh/sh_gethome.c $(SRCDIR)/sh/sh_init.c $(SRCDIR)/sh/sh_loop.c $(SRCDIR)/sh/sh_main.c $(SRCDIR)/sh/sh_msg.c $(SRCDIR)/sh/sh_pop.c $(SRCDIR)/sh/sh_popargs.c $(SRCDIR)/sh/sh_push.c $(SRCDIR)/sh/sh_pushargs.c $(SRCDIR)/sh/sh_root.c $(SRCDIR)/sh/sh_setargs.c $(SRCDIR)/sh/sh_subshell.c $(SRCDIR)/sh/sh_usage.c $(SRCDIR)/sig/sig_block.c $(SRCDIR)/sig/sig_unblock.c $(SRCDIR)/source/source_flush.c $(SRCDIR)/source/source_get.c $(SRCDIR)/source/source_msg.c $(SRCDIR)/source/source_newline.c $(SRCDIR)/source/source_next.c $(SRCDIR)/source/source_peek.c $(SRCDIR)/source/source_peekn.c $(SRCDIR)/source/source_pop.c $(SRCDIR)/source/source_push.c $(SRCDIR)/source/source_skip.c $(SRCDIR)/term/term_ansi.c $(SRCDIR)/term/term_attr.c $(SRCDIR)/term/term_backspace.c $(SRCDIR)/term/term_delete.c $(SRCDIR)/term/term_end.c $(SRCDIR)/term/term_escape.c $(SRCDIR)/term/term_getline.c $(SRCDIR)/term/term_home.c $(SRCDIR)/term/term_init.c $(SRCDIR)/term/term_insertc.c $(SRCDIR)/term/term_left.c $(SRCDIR)/term/term_newline.c $(SRCDIR)/term/term_overwritec.c $(SRCDIR)/term/term_read.c $(SRCDIR)/term/term_restore.c $(SRCDIR)/term/term_right.c $(SRCDIR)/term/term_setline.c $(SRCDIR)/term/term_winsize.c $(SRCDIR)/tree/tree_count.c $(SRCDIR)/tree/tree_free.c $(SRCDIR)/tree/tree_newlink.c $(SRCDIR)/tree/tree_newnode.c $(SRCDIR)/tree/tree_print.c $(SRCDIR)/tree/tree_printlist.c $(SRCDIR)/var/var_bsearch.c $(SRCDIR)/var/var_chflg.c $(SRCDIR)/var/var_cleanup.c $(SRCDIR)/var/var_copys.c $(SRCDIR)/var/var_count.c $(SRCDIR)/var/var_create.c $(SRCDIR)/var/var_dump.c $(SRCDIR)/var/var_export.c $(SRCDIR)/var/var_get.c $(SRCDIR)/var/var_hsearch.c $(SRCDIR)/var/var_import.c $(SRCDIR)/var/var_init.c $(SRCDIR)/var/var_len.c $(SRCDIR)/var/var_lexhash.c $(SRCDIR)/var/var_print.c $(SRCDIR)/var/var_rndhash.c $(SRCDIR)/var/var_search.c $(SRCDIR)/var/var_set.c $(SRCDIR)/var/var_setsa.c $(SRCDIR)/var/var_setvint.c $(SRCDIR)/var/var_setvsa.c $(SRCDIR)/var/var_unset.c $(SRCDIR)/var/var_valid.c $(SRCDIR)/var/var_value.c $(SRCDIR)/var/var_vdefault.c $(SRCDIR)/var/var_vlen.c $(SRCDIR)/vartab/vartab_add.c $(SRCDIR)/vartab/vartab_cleanup.c $(SRCDIR)/vartab/vartab_dump.c $(SRCDIR)/vartab/vartab_hash.c $(SRCDIR)/vartab/vartab_pop.c $(SRCDIR)/vartab/vartab_print.c $(SRCDIR)/vartab/vartab_push.c $(SRCDIR)/vartab/vartab_root.c $(SRCDIR)/vartab/vartab_search.c
HEADERS = buffer.h byte.h fmt.h mmap.h open.h safemult.h scan.h shell.h str.h stralloc.h uint16.h uint32.h uint64.h builtin.h debug.h eval.h exec.h expand.h fd.h fdstack.h fdtable.h history.h job.h parse.h prompt.h redir.h sh.h sig.h source.h term.h tree.h var.h vartab.h
OBJECTS = $(SOURCES:%.c=%.o)
PROGRAM = shish$(EXEEXT)

OBJDIR = .

all: $(PROGRAM)

$(PROGRAM): $(OBJECTS)
	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ $(LIBS)


%.o: %.c
	$(CC) $(CFLAGS) $(DEFS) $(CPPFLAGS) -c -o $@ $<

clean:
	$(RM) $(OBJECTS)
